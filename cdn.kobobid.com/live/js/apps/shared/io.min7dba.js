if(typeof _is_demo_auction==="undefined"){var _is_demo_auction=false}var EVENT_TYPE_BUY_NOW_AVAILABLE=(_is_demo_auction?"demo_":"")+"buy_now_available";var EVENT_TYPE_ACTIVE_BIDDERS=(_is_demo_auction?"demo_":"")+"active-bidders";var EVENT_TYPE_ENDED=(_is_demo_auction?"demo_":"")+"ended";var EVENT_TYPE_BID=(_is_demo_auction?"demo_":"")+"bid";var EVENT_TYPE_ONGOING_LOGS=(_is_demo_auction?"demo_":"")+"ongoing-logs";var EVENT_TYPE_TOKEN_UPDATE=(_is_demo_auction?"demo_":"")+"token-update";var EVENT_TYPE_USER_ERROR=(_is_demo_auction?"demo_":"")+"user_error";var EVENT_TYPE_UPCOMING_COUNTDOWN=(_is_demo_auction?"demo_":"")+"upcoming-countdown";var EVENT_TYPE_MOVE_LIVE=(_is_demo_auction?"demo_":"")+"move-live";var EVENT_TYPE_ONGOING_COUNT_DOWN=(_is_demo_auction?"demo_":"")+"ongoing-countdown";var EVENT_TYPE_NOTIFICATION_RECEIVED=(_is_demo_auction?"demo_":"")+"notification-received";var EVENT_TYPE_IN_APP_NOTIFICATION_RECEIVED=(_is_demo_auction?"demo_":"")+"in-app-notification-received";var EVENT_TYPE_CHECK_ACTIVE_BIDDERS=(_is_demo_auction?"demo_":"")+"check-active-bidders";var EVENT_TYPE_PAST_WINNERS=(_is_demo_auction?"demo_":"")+"past-winners";var EVENT_TYPE_RAFFLE_PAST_WINNERS=(_is_demo_auction?"demo_":"")+"raffle-past-winners";var EVENT_TYPE_BID_MATE_DEACTIVATE=(_is_demo_auction?"demo_":"")+"bidmate-deactivate";var EVENT_TYPE_BID_MATE_UPDATE=(_is_demo_auction?"demo_":"")+"bidmate-update";var EVENT_TYPE_BID_MATE=(_is_demo_auction?"demo_":"")+"bidmate";var EVENT_TYPE_BID_MATE_CHECK=(_is_demo_auction?"demo_":"")+"bidmate-check";var EVENT_TYPE_WON=(_is_demo_auction?"demo_":"")+"won";var EVENT_TYPE_AUCTION_MESSAGE=(_is_demo_auction?"demo_":"")+"auction-message";var EVENT_TYPE_RAFFLE_ENDED=(_is_demo_auction?"demo_":"")+"raffle-ended";var EVENT_TYPE_CHECK_VERSION=(_is_demo_auction?"demo_":"")+"check-version";var EVENT_TYPE_RAFFLE_CHECK_VERSION=(_is_demo_auction?"demo_":"")+"raffle-check-version";var EVENT_TYPE_SCRATCH_CHECK_VERSION=(_is_demo_auction?"demo_":"")+"scratch-check-version";var EVENT_TYPE_TOURNAMENT_CHECK_VERSION=(_is_demo_auction?"demo_":"")+"tournament-check-version";var EVENT_TYPE_WATCH_LIST=(_is_demo_auction?"demo_":"")+"watchlist";var EVENT_TYPE_TOURNAMENT_WATCH_LIST=(_is_demo_auction?"demo_":"")+"tournament-watchlist";var EVENT_TYPE_MOVE_TIME="move-time";var EVENT_TYPE_SHOW_START_AUCTION_BUTTON_CHECK=(_is_demo_auction?"demo-":"")+"show-start-auction-button-check";var EVENT_TYPE_SHOW_AUCTION_START_BUTTON=(_is_demo_auction?"demo-":"")+"show-auction-start-button";var EVENT_TYPE_START_DEMO_AUCTION=(_is_demo_auction?"demo-":"")+"start-auction";var EVENT_TYPE_START_SERVER=(_is_demo_auction?"demo-":"")+"server-restart";var EVENT_TYPE_INITIATE_CONFIRM_NUMBER=(_is_demo_auction?"demo-":"")+"initiate-confirm-number";var EVENT_TYPE_JOIN_RAFFLE=(_is_demo_auction?"demo-":"")+"join-raffle";var EVENT_TYPE_RAFFLE_UPCOMING_LOGS=(_is_demo_auction?"demo_":"")+"raffle-upcoming-logs";var EVENT_TYPE_UPCOMING_RAFFLE_COUNTDOWN=(_is_demo_auction?"demo_":"")+"upcoming-raffle-countdown";var EVENT_TYPE_UNPUBLISH_RAFFLE_LIVE=(_is_demo_auction?"demo_":"")+"unpublish-raffle-live";var EVENT_TYPE_TOURNAMENT_GAME_STATISTICS=(_is_demo_auction?"demo_":"")+"tournament-game-statistics";var EVENT_TYPE_CLOSE_TOURNAMENT=(_is_demo_auction?"demo_":"")+"tournament-close";var EVENT_TYPE_MOVE_TOURNAMENT_LIVE=(_is_demo_auction?"demo_":"")+"tournament-move-live";var EVENT_TYPE_ON_GOING_TOURNAMENT=(_is_demo_auction?"demo_":"")+"tournament-ongoing-countdown";var EVENT_TYPE_TOURNAMENT_LINEUP_ENTRY=(_is_demo_auction?"demo_":"")+"tournament-lineup-entry";var EVENT_TYPE_ENDED_TOURNAMENT=(_is_demo_auction?"demo_":"")+"tournament-ended-countdown";var EVENT_TYPE_TOURNAMENT_ENTRIES_LOG=(_is_demo_auction?"demo_":"")+"tournament-entries-log";var EVENT_TYPE_UPCOMING_TOURNAMENT=(_is_demo_auction?"demo_":"")+"tournament-upcoming-countdown";var EVENT_TYPE_TOURNAMENT_STARTED=(_is_demo_auction?"demo_":"")+"tournament-started";var EVENT_TYPE_TOURNAMENT_LINEUP_SUBMITTED=(_is_demo_auction?"demo_":"")+"tournament-lineup-submitted";var EVENT_TYPE_JOIN_SCRATCH_CARDS=(_is_demo_auction?"demo_":"")+"scratch-card-join-game";var EVENT_TYPE_SELECT_OPTION_FOR_SCRATCH_CARD=(_is_demo_auction?"demo_":"")+"scratch-card-select-option-for-game";var EVENT_TYPE_SELECT_OPTION_FOR_SCRATCH_CARD_LOADING=(_is_demo_auction?"demo_":"")+"scratch-card-select-option-for-game-loading";window.new_socket_connection=true;var socket=io({transports:["websocket"]});function emitRaffleJoinEvent(raffle_id,entry_value){socket.emit(EVENT_TYPE_JOIN_RAFFLE,{rid:raffle_id,entries:entry_value})}socket.on(EVENT_TYPE_JOIN_RAFFLE,function(status){if(typeof emit_raffle_entry_callback_handler==="function"){emit_raffle_entry_callback_handler(status.rid,status)}});socket.on(EVENT_TYPE_ENDED_TOURNAMENT,function(content){if(typeof content.id!=="undefined"&&document.getElementById("tournament_"+content.id)){if(typeof window.tournaments!=="undefined"&&typeof window.tournaments[content.id]!=="undefined"){window.tournaments[content.id].ended=true;if(typeof content.endtime!=="undefined"){window.tournaments[content.id].endtime=content.endtime}}var itemsToRemove=document.querySelectorAll("#tournament_"+content.id+" .remove-end");if(itemsToRemove&&itemsToRemove.length>0){var remove_index;for(remove_index=0;remove_index<itemsToRemove.length;remove_index++){var itemToRemove=itemsToRemove[remove_index];itemToRemove.classList.add("dn")}}var itemsToShow=document.querySelectorAll("#tournament_"+content.id+" .show-end");if(itemsToShow&&itemsToShow.length>0){var show_index;for(show_index=0;show_index<itemsToShow.length;show_index++){var itemToShow=itemsToShow[show_index];itemToShow.classList.remove("dn")}}var updateToEndTime=document.querySelectorAll("#tournament_"+content.id+" .checking-date-to-switch");if(updateToEndTime&&updateToEndTime.length>0){var update_time_index1;for(update_time_index1=0;update_time_index1<updateToEndTime.length;update_time_index1++){updateToEndTime[update_time_index1].classList.remove("checking-date-to-switch");updateToEndTime[update_time_index1].classList.remove("hide-short-display");updateToEndTime[update_time_index1].removeAttribute("data-tournament-local-date");updateToEndTime[update_time_index1].classList.add("product-date-to-switch");updateToEndTime[update_time_index1].classList.add("ended-without-time");updateToEndTime[update_time_index1].setAttribute("data-local-date",content.endtime)}}if(typeof window.sessionUser!=="undefined"&&typeof window.sessionUser.username!=="undefined"){if(typeof content.winners!=="undefined"&&content.winners.length>0){var winner_index;for(winner_index=0;winner_index<content.winners.length;winner_index++){var winner_data=content.winners[winner_index];if(typeof winner_data.user_name!=="undefined"&&winner_data.user_name===window.sessionUser.username&&typeof winner_data.amount!=="undefined"&&winner_data.amount>0){try{confetti.start(1e3*10)}catch(e){}break}}}}}});function animateFlashForSection(section){if(!section.classList.contains("flash_animate")){section.classList.remove("flash_animate");section.classList.add("flash_animate");section.addEventListener("animationend",function(){this.classList.remove("flash_animate")})}}function jqueryAnimateFlashForSection(section){if(!section.hasClass("flash_animate")){section.removeClass("flash_animate");section.addClass("flash_animate");section.off("animationend").on("animationend",function(){section.removeClass("flash_animate")})}}socket.on(EVENT_TYPE_TOURNAMENT_LINEUP_ENTRY,function(content){if(typeof emit_fantasy_tournament_entries_change==="function"){emit_fantasy_tournament_entries_change(content)}});socket.on(EVENT_TYPE_UPCOMING_TOURNAMENT,function(content){if(typeof emit_fantasy_tournament_entries_change==="function"){emit_fantasy_tournament_entries_change(content)}});socket.on(EVENT_TYPE_ON_GOING_TOURNAMENT,function(content){if(typeof emit_fantasy_move_live_callback_handler==="function"){emit_fantasy_move_live_callback_handler(content)}if(typeof emit_fantasy_tournament_ongoing_callback_handler==="function"){emit_fantasy_tournament_ongoing_callback_handler(content)}});socket.on(EVENT_TYPE_TOURNAMENT_ENTRIES_LOG,function(content){if(typeof emit_fantasy_content_tournament_entries_handler==="function"){emit_fantasy_content_tournament_entries_handler(content)}});socket.on(EVENT_TYPE_MOVE_TOURNAMENT_LIVE,function(content){if(typeof emit_fantasy_move_live_callback_handler==="function"){emit_fantasy_move_live_callback_handler(content)}});socket.on(EVENT_TYPE_CLOSE_TOURNAMENT,function(content){if(typeof emit_fantasy_close_callback_handler==="function"){emit_fantasy_close_callback_handler(content)}});socket.on(EVENT_TYPE_TOURNAMENT_STARTED,function(content){if(typeof emit_fantasy_start_callback_handler==="function"){emit_fantasy_start_callback_handler(content)}});function emitWatchListEvent(in_watchlist_product_id,in_watch_list_action,element_id){socket.emit(EVENT_TYPE_WATCH_LIST,{element_id:element_id,pid:in_watchlist_product_id,action:in_watch_list_action})}function emitTournamentWatchListEvent(in_watchlist_tournament_id,in_watch_list_action,element_id){socket.emit(EVENT_TYPE_TOURNAMENT_WATCH_LIST,{element_id:element_id,tid:in_watchlist_tournament_id,action:in_watch_list_action})}socket.on(EVENT_TYPE_WATCH_LIST,function(watchlist_response){if(typeof emit_watch_list_callback_handler==="function"&&typeof watchlist_response.success!=="undefined"&&watchlist_response.success){emit_watch_list_callback_handler(watchlist_response.element_id,watchlist_response.action,watchlist_response.pid)}else if(typeof watchlist_response.error!=="undefined"){if(typeof user_error_handler==="function"){user_error_handler(watchlist_response)}}});socket.on(EVENT_TYPE_TOURNAMENT_WATCH_LIST,function(watchlist_response){if(typeof emit_tournament_watch_list_callback_handler==="function"&&typeof watchlist_response.success!=="undefined"&&watchlist_response.success){emit_tournament_watch_list_callback_handler(watchlist_response.element_id,watchlist_response.action,watchlist_response.tid)}else if(typeof watchlist_response.error!=="undefined"){if(typeof user_error_handler==="function"){user_error_handler(watchlist_response)}}});function emitShowStartDemoAuctionButtonCheck(){if(_is_demo_auction&&typeof show_start_demo_auction_button!=="undefined"&&show_start_demo_auction_button){socket.emit(EVENT_TYPE_SHOW_START_AUCTION_BUTTON_CHECK,{},function(status){})}}socket.on(EVENT_TYPE_NOTIFICATION_RECEIVED,function(processNotification){if(typeof window.processUserProductBiddingNotification==="function"){window.processUserProductBiddingNotification(processNotification)}});function emitBidEvent(product){socket.emit(EVENT_TYPE_BID,{pid:product})}socket.on(EVENT_TYPE_BID,status=>{if(typeof emit_bid_callback_handler==="function"){emit_bid_callback_handler(status)}});socket.on(EVENT_TYPE_MOVE_LIVE,data=>{if(typeof moveLive==="function"){moveLive(data)}});socket.on(EVENT_TYPE_UNPUBLISH_RAFFLE_LIVE,data=>{if(typeof unpublishRaffle==="function"){unpublishRaffle(data.key)}});socket.on(EVENT_TYPE_USER_ERROR,status=>{if(typeof user_error_handler==="function"){user_error_handler(status)}});socket.on(EVENT_TYPE_START_SERVER,()=>{window.serverRestart=true;window.connectionEstablished=false;window.lastPingLatency=0;window.lastPingDate=null;window.lastLatencyDisplayed=false;if(typeof init_idle_pop_up!=="undefined"&&typeof init_idle_pop_up==="function"){init_idle_pop_up(null)}});socket.on("disconnect",reason=>{window.new_socket_connection=false;if(reason==="io server disconnect"||reason==="io client disconnect"){window.idleModalOpen=true;window.lastPingLatency=0;window.lastPingDate=null;window.disconnectReason=""}else{window.disconnectReason=reason;window.connectionEstablished=false}});socket.on(EVENT_TYPE_MOVE_TIME,response_date=>{if(!response_date){return}handle_time_ping(response_date.date)});setInterval(()=>{if(typeof process_user_inactivity==="function"){process_user_inactivity()}},1e3);socket.on("connect",()=>{enableBtns();window.connectionEstablished=true;window.lastLatencyDisplay=(new Date).getTime();if($(".tournament_entries")[0]||$(".scratch_card_container")[0]&&$(".scratch_card_container").data("id")||document.querySelectorAll(".scratch-card .p-card")&&document.querySelectorAll(".scratch-card .p-card").length>0||document.querySelectorAll(".tournament-card .p-card")&&document.querySelectorAll(".tournament-card .p-card").length>0||document.querySelectorAll(".raffle-card .p-card")&&document.querySelectorAll(".raffle-card .p-card").length>0||document.querySelectorAll(".product-card .p-card")&&document.querySelectorAll(".product-card .p-card").length>0){emitOnGoingCheckOnVisibleProducts()}else if(typeof window.idleModalOpen!=="undefined"&&window.idleModalOpen&&typeof window.serverRestart!=="undefined"&&window.serverRestart){reloadOnReconnect(true,false)}if((typeof username==="undefined"||!username)&&(typeof window.sessionUser==="undefined"||(typeof window.sessionUser.username==="undefined"||!window.sessionUser.username))){return}if(typeof productId==="undefined"&&typeof raffleId==="undefined"){return}if(typeof window.idleModalOpen!=="undefined"&&window.idleModalOpen&&(typeof window.serverRestart==="undefined"||!window.serverRestart)){reloadOnReconnect(false,false)}if(typeof productId!=="undefined"){socket.emit(EVENT_TYPE_BID_MATE_CHECK,{pid:productId})}});if(typeof productId!=="undefined"){socket.on(EVENT_TYPE_BID_MATE_CHECK,function(status){if(typeof status.success!=="undefined"&&!status.success&&typeof status.error!=="undefined"){if(typeof user_error_handler==="function"){user_error_handler(status)}}else if(typeof bid_mate_check_callback_handler==="function"){bid_mate_check_callback_handler(status)}})}socket.on(EVENT_TYPE_BUY_NOW_AVAILABLE,o=>{if(typeof buy_it_now_available_callback_handler==="function"){buy_it_now_available_callback_handler(o)}});socket.on(EVENT_TYPE_WON,o=>{if(typeof on_auction_won_handler==="function"){on_auction_won_handler(o,_is_demo_auction)}});socket.on(EVENT_TYPE_AUCTION_MESSAGE,o=>{if(typeof on_auction_message_handler==="function"){on_auction_message_handler(o,_is_demo_auction)}});socket.on(EVENT_TYPE_IN_APP_NOTIFICATION_RECEIVED,o=>{if(typeof on_notification_in_app_received_handler==="function"){on_notification_in_app_received_handler(o)}});socket.on(EVENT_TYPE_UPCOMING_COUNTDOWN,o=>{on_upcoming_countdown_handler(o)});socket.on(EVENT_TYPE_UPCOMING_RAFFLE_COUNTDOWN,o=>{on_upcoming_raffle_countdown_handler(o)});socket.on(EVENT_TYPE_TOKEN_UPDATE,o=>{if(typeof on_token_update_handler==="function"){on_token_update_handler(o,_is_demo_auction)}});socket.on(EVENT_TYPE_ENDED,o=>{if(typeof on_auction_ended==="function"){on_auction_ended(o)}});socket.on(EVENT_TYPE_RAFFLE_ENDED,o=>{if(typeof on_raffle_ended==="function"){on_raffle_ended(o)}});socket.on(EVENT_TYPE_ONGOING_COUNT_DOWN,o=>{if(typeof on_ongoing_countdown_handler==="function"){on_ongoing_countdown_handler(o)}});socket.on(EVENT_TYPE_ONGOING_LOGS,log_data=>{if(typeof on_ongoing_logs_handler==="function"){on_ongoing_logs_handler(log_data)}});socket.on(EVENT_TYPE_RAFFLE_UPCOMING_LOGS,log_data=>{if(typeof emit_raffle_logs_callback_handler==="function"){emit_raffle_logs_callback_handler(log_data)}});function emit_raffle_logs_callback_handler(status){if(status&&typeof status.rid!=="undefined"&&typeof status.entries!=="undefined"){if(typeof window.upcomingRaffles!=="undefined"&&window.upcomingRaffles.hasOwnProperty(status.rid)){window.upcomingRaffles[status.rid].my_entries=status.entries;var upcomingRaffleId=status.rid;var rafflesDrawProgressEl=$("#raffle-draw-progress-bar-"+status.rid);var rafflesDrawAmount=$("#p-rid-close-display-"+status.rid);if(rafflesDrawProgressEl[0]&&typeof window.upcomingRaffles[upcomingRaffleId].my_entries!=="undefined"&&window.upcomingRaffles[upcomingRaffleId].my_entries>0){var raffleCloseButton=$("#p-rid-close-menu-"+upcomingRaffleId);var entryTextDiv=$("#raffle_"+upcomingRaffleId+" .raffle-entry-txt");if(entryTextDiv[0]){entryTextDiv.html("("+status.entries+")");entryTextDiv.removeClass("dn")}if(raffleCloseButton[0]&&raffleCloseButton.is(":hidden")&&rafflesDrawAmount.is(":hidden")||$("#raffle_"+upcomingRaffleId+" .p-rid-close").is(":hidden")){$("#raffle_"+upcomingRaffleId+" .p-rid-close").show();rafflesDrawAmount.show()}}}}}function emitOnGoingCheckOnVisibleProducts(){var visible_scratches=[],visible_products=[],visible_raffles=[],visible_tournaments=[];var product_cards_selected=document.querySelectorAll(".product-card .p-card"),product_card_index;for(product_card_index=0;product_card_index<product_cards_selected.length;product_card_index++){try{if(product_cards_selected[product_card_index].getAttribute("id")){visible_products.push(product_cards_selected[product_card_index].getAttribute("id").replace("product_","").trim())}}catch(e){}}if(visible_products.length>0){socket.emit(EVENT_TYPE_CHECK_VERSION,{new_connection:window.new_socket_connection,products:visible_products})}var tournament_cards_entries=document.querySelectorAll(".tournament_entries"),tournament_cards_selected=document.querySelectorAll(".tournament-card .p-card"),tournament_card_index;for(tournament_card_index=0;tournament_card_index<tournament_cards_selected.length;tournament_card_index++){try{if(tournament_cards_selected[tournament_card_index].getAttribute("id")){visible_tournaments.push(tournament_cards_selected[tournament_card_index].getAttribute("id").replace("tournament_","").trim())}}catch(e){}}if(visible_tournaments.length<=0){for(tournament_card_index=0;tournament_card_index<tournament_cards_entries.length;tournament_card_index++){try{if(tournament_cards_entries[tournament_card_index].getAttribute("id")){visible_tournaments.push(tournament_cards_entries[tournament_card_index].getAttribute("id").replace("tournament_entries_","").trim())}}catch(e){}}}if(visible_tournaments.length>0){socket.emit(EVENT_TYPE_TOURNAMENT_CHECK_VERSION,{new_connection:window.new_socket_connection,tournaments:visible_tournaments})}var raffle_cards_selected=document.querySelectorAll(".raffle-card .p-card"),raffle_card_index;for(raffle_card_index=0;raffle_card_index<raffle_cards_selected.length;raffle_card_index++){try{if(raffle_cards_selected[raffle_card_index].getAttribute("id")){visible_raffles.push(raffle_cards_selected[raffle_card_index].getAttribute("id").replace("raffle_","").trim())}}catch(e){}}if(visible_raffles.length>0){socket.emit(EVENT_TYPE_RAFFLE_CHECK_VERSION,{new_connection:window.new_socket_connection,raffles:visible_raffles})}var scratch_cards_selected=document.querySelectorAll(".scratch-card .p-card"),scratch_card_index;for(scratch_card_index=0;scratch_card_index<scratch_cards_selected.length;scratch_card_index++){try{if(scratch_cards_selected[scratch_card_index].getAttribute("id")){visible_scratches.push(scratch_cards_selected[scratch_card_index].getAttribute("id").replace("scratch_","").trim())}}catch(e){}}if(visible_scratches.length===0&&$(".scratch_card_container")[0]&&$(".scratch_card_container").data("id")){visible_scratches.push($(".scratch_card_container").data("id"))}if(visible_scratches.length>0){socket.emit(EVENT_TYPE_SCRATCH_CHECK_VERSION,{new_connection:window.new_socket_connection,scratch_cards:visible_scratches})}if(visible_scratches.length===0&&visible_raffles.length===0&&visible_products.length===0&&visible_tournaments.length===0){socket.emit(EVENT_TYPE_CHECK_VERSION,{new_connection:window.new_socket_connection})}}function emitCheckActiveBidders(productId,tab_product_status){socket.emit(EVENT_TYPE_CHECK_ACTIVE_BIDDERS,{pid:productId})}socket.on(EVENT_TYPE_CHECK_ACTIVE_BIDDERS,activeBidderCheckResponse=>{var pWPid=activeBidderCheckResponse.pid;var status=activeBidderCheckResponse.data;if(typeof parseActiveBidderDetails==="function"){parseActiveBidderDetails(pWPid,status,tab_product_status)}});socket.on(EVENT_TYPE_ACTIVE_BIDDERS,activeWinnerResponse=>{var pWPid=activeWinnerResponse.pid;var status=activeWinnerResponse.data;if(typeof parseActiveBidderDetails==="function"){parseActiveBidderDetails(pWPid,status,typeof window.tab_product_status!=="undefined"?window.tab_product_status:"pending")}});socket.on(EVENT_TYPE_TOURNAMENT_CHECK_VERSION,function(current_version){if(typeof check_version_callback_handler==="function"){check_version_callback_handler(current_version)}});socket.on(EVENT_TYPE_RAFFLE_CHECK_VERSION,function(current_version){if(typeof check_version_callback_handler==="function"){check_version_callback_handler(current_version)}});socket.on(EVENT_TYPE_SCRATCH_CHECK_VERSION,function(){if(typeof reloadOnReconnect==="function"&&typeof window.idleModalOpen!=="undefined"&&window.idleModalOpen&&typeof window.serverRestart!=="undefined"&&window.serverRestart){reloadOnReconnect(true,[])}});socket.on(EVENT_TYPE_CHECK_VERSION,function(current_version){if(typeof check_version_callback_handler==="function"){check_version_callback_handler(current_version)}});function emitRecentWinnersEvent(productId){socket.emit(EVENT_TYPE_PAST_WINNERS,{pid:productId})}socket.on(EVENT_TYPE_PAST_WINNERS,pastWinnerResponse=>{if(typeof past_winners_event_callback_handler==="function"){past_winners_event_callback_handler(pastWinnerResponse,pastWinnerResponse.pid)}});function emitRecentRaffleWinnersEvent(raffleId){socket.emit(EVENT_TYPE_RAFFLE_PAST_WINNERS,{rid:raffleId})}socket.on(EVENT_TYPE_RAFFLE_PAST_WINNERS,pastWinnerResponse=>{if(typeof pastWinnerResponse.success!=="undefined"&&!pastWinnerResponse.success&&typeof pastWinnerResponse.error!=="undefined"){if(typeof user_error_handler==="function"){user_error_handler(pastWinnerResponse)}}else if(typeof past_winners_event_callback_handler==="function"){past_raffle_winners_event_callback_handler(pastWinnerResponse,pastWinnerResponse.rid)}});function emitBidMateActivationEvent(productId,count){socket.emit(EVENT_TYPE_BID_MATE,{pid:productId,count:count})}socket.on(EVENT_TYPE_BID_MATE,status=>{if(typeof status.success!=="undefined"&&!status.success&&typeof status.error!=="undefined"){if(typeof user_error_handler==="function"){user_error_handler(status)}}else if(typeof activate_bid_mate_event_callback_handler==="function"){activate_bid_mate_event_callback_handler(status,status.pid,status.left)}});function emitBidMateDeactivationEvent(productId){socket.emit(EVENT_TYPE_BID_MATE_DEACTIVATE,{pid:productId})}socket.on(EVENT_TYPE_BID_MATE_DEACTIVATE,status=>{if(typeof status.success!=="undefined"&&!status.success&&typeof status.error!=="undefined"){if(typeof user_error_handler==="function"){user_error_handler(status)}}else if(typeof deactivate_bid_mate_event_callback_handler==="function"){deactivate_bid_mate_event_callback_handler(status)}});socket.on(EVENT_TYPE_BID_MATE_UPDATE,o=>{if(typeof on_bid_mate_update_handler==="function"){on_bid_mate_update_handler(o)}});socket.on(EVENT_TYPE_SHOW_AUCTION_START_BUTTON,status=>{if(typeof toggle_start_demo_auction_button==="function"&&typeof show_start_demo_auction_button!=="undefined"&&show_start_demo_auction_button){toggle_start_demo_auction_button(status)}});function emitStartDemoAuction(callback){const id=typeof productId!=="undefined"&&productId?productId:"";socket.emit(EVENT_TYPE_START_DEMO_AUCTION,{productId:id},function(response){if(typeof callback==="function"){callback(response)}})}socket.on(EVENT_TYPE_INITIATE_CONFIRM_NUMBER,status=>{if(typeof openConfirmPhoneModal==="function"){openConfirmPhoneModal(status)}});function emitInitiateConfirmNumber(callback,data,isPaymentFlow=false){if(isPaymentFlow===true&&_.has(data,"reference")){return callback(data.reference)}socket.emit(EVENT_TYPE_INITIATE_CONFIRM_NUMBER,data,function(response){if(typeof callback==="function"){callback(response)}})}function closeBidMateToggle(pid){if(document.getElementById("p-bid-bidmate-icon-"+pid)){document.getElementById("p-bid-bidmate-icon-"+pid).style.display="block"}if(document.getElementById("bidmate-active-"+pid)){document.getElementById("bidmate-active-"+pid).classList.add("dn")}if(document.getElementById("p-card-buttons-"+pid)){document.getElementById("p-card-buttons-"+pid).style.display="block"}if(document.getElementById("watchlist_container_"+pid)){document.getElementById("watchlist_container_"+pid).style.display="block"}if(document.getElementById("p-bidmate-toggle-off-"+pid)){document.getElementById("p-bidmate-toggle-off-"+pid).style.display="none"}if(document.getElementById("p-bidmate-toggle-on-"+pid)){document.getElementById("p-bidmate-toggle-on-"+pid).style.display="none"}}function handleBidMateToggleOn(pid){if(document.getElementById("p-bid-bidmate-display-"+pid)){document.getElementById("p-bid-bidmate-display-"+pid).style.display="none"}if(document.getElementById("p-bid-bidmate-menu-"+pid)){document.getElementById("p-bid-bidmate-menu-"+pid).style.display="block"}if(document.getElementById("p-bid-bidmate-icon-"+pid)){document.getElementById("p-bid-bidmate-icon-"+pid).style.display="block"}if(document.getElementById("bidmate-active-"+pid)){document.getElementById("bidmate-active-"+pid).classList.add("dn")}if(document.getElementById("p-card-buttons-"+pid)){document.getElementById("p-card-buttons-"+pid).style.display="block"}if(document.getElementById("watchlist_container_"+pid)){document.getElementById("watchlist_container_"+pid).style.display="block"}if(document.getElementById("p-bidmate-toggle-off-"+pid)){document.getElementById("p-bidmate-toggle-off-"+pid).style.display="none"}if(document.getElementById("p-bidmate-toggle-on-"+pid)){document.getElementById("p-bidmate-toggle-on-"+pid).style.display="block"}}function handleBidMateToggleOff(pid){if(document.getElementById("p-bid-bidmate-icon-"+pid)){document.getElementById("p-bid-bidmate-icon-"+pid).style.display="none"}if(document.getElementById("p-bid-bidmate-icon-"+pid)){document.getElementById("p-bid-bidmate-icon-"+pid).style.display="none"}if(document.getElementById("p-card-buttons-"+pid)){document.getElementById("p-card-buttons-"+pid).style.display="none"}if(document.getElementById("watchlist_container_"+pid)){document.getElementById("watchlist_container_"+pid).style.display="none"}if(document.getElementById("bidmate-active-"+pid)){document.getElementById("bidmate-active-"+pid).classList.remove("dn")}if(document.getElementById("p-bidmate-toggle-off-"+pid)){document.getElementById("p-bidmate-toggle-off-"+pid).style.display="block"}if(document.getElementById("p-bidmate-toggle-on-"+pid)){document.getElementById("p-bidmate-toggle-on-"+pid).style.display="none"}}function handleBidMateButtonsReset(){var bidMatesToggleOffElement=document.querySelectorAll(".p-bidmate-toggle-off"),bmToggleOffIndex;for(bmToggleOffIndex=0;bmToggleOffIndex<bidMatesToggleOffElement.length;bmToggleOffIndex++){if(document.getElementById("p-bid-bidmate-icon-"+bidMatesToggleOffElement[bmToggleOffIndex])&&document.getElementById("p-bid-bidmate-icon-"+bidMatesToggleOffElement[bmToggleOffIndex].dataset.pid)){document.getElementById("p-bid-bidmate-icon-"+bidMatesToggleOffElement[bmToggleOffIndex].dataset.pid).style.display="block"}if(document.getElementById("p-card-buttons-"+bidMatesToggleOffElement[bmToggleOffIndex])&&document.getElementById("p-card-buttons-"+bidMatesToggleOffElement[bmToggleOffIndex].dataset.pid)){document.getElementById("p-card-buttons-"+bidMatesToggleOffElement[bmToggleOffIndex].dataset.pid).style.display="block"}if(document.getElementById("watchlist_container_"+bidMatesToggleOffElement[bmToggleOffIndex])&&document.getElementById("watchlist_container_"+bidMatesToggleOffElement[bmToggleOffIndex].dataset.pid)){document.getElementById("watchlist_container_"+bidMatesToggleOffElement[bmToggleOffIndex].dataset.pid).style.display="block"}if(document.getElementById("bidmate-active-"+bidMatesToggleOffElement[bmToggleOffIndex])&&document.getElementById("bidmate-active-"+bidMatesToggleOffElement[bmToggleOffIndex].dataset.pid)){document.getElementById("bidmate-active-"+bidMatesToggleOffElement[bmToggleOffIndex].dataset.pid).classList.add("dn")}bidMatesToggleOffElement[bmToggleOffIndex].style.display="none"}var bidMatesToggleOnElement=document.querySelectorAll(".p-bidmate-toggle-on"),bmToggleOnIndex;for(bmToggleOnIndex=0;bmToggleOnIndex<bidMatesToggleOnElement.length;bmToggleOnIndex++){if(document.getElementById("p-bid-bidmate-icon-"+bidMatesToggleOnElement[bmToggleOnIndex])&&document.getElementById("p-bid-bidmate-icon-"+bidMatesToggleOnElement[bmToggleOnIndex].dataset.pid)){document.getElementById("p-bid-bidmate-icon-"+bidMatesToggleOnElement[bmToggleOnIndex].dataset.pid).style.display="block"}if(document.getElementById("p-card-buttons-"+bidMatesToggleOnElement[bmToggleOnIndex])&&document.getElementById("p-card-buttons-"+bidMatesToggleOnElement[bmToggleOnIndex].dataset.pid)){document.getElementById("p-card-buttons-"+bidMatesToggleOnElement[bmToggleOnIndex].dataset.pid).style.display="block"}if(document.getElementById("watchlist_container_"+bidMatesToggleOffElement[bmToggleOffIndex])&&document.getElementById("watchlist_container_"+bidMatesToggleOffElement[bmToggleOffIndex].dataset.pid)){document.getElementById("watchlist_container_"+bidMatesToggleOffElement[bmToggleOffIndex].dataset.pid).style.display="block"}if(document.getElementById("bidmate-active-"+bidMatesToggleOnElement[bmToggleOnIndex])&&document.getElementById("bidmate-active-"+bidMatesToggleOnElement[bmToggleOnIndex].dataset.pid)){document.getElementById("bidmate-active-"+bidMatesToggleOnElement[bmToggleOnIndex].dataset.pid).classList.add("dn")}bidMatesToggleOnElement[bmToggleOnIndex].style.display="none"}}function handleBidMateToggleClick(pid){if(document.getElementById("p-bidmate-toggle-off-"+pid).style.display==="block"||document.getElementById("p-bidmate-toggle-on-"+pid).style.display==="block"){document.getElementById("p-bid-bidmate-icon-"+pid).style.display="block";if(document.getElementById("bidmate-active-"+pid)){document.getElementById("bidmate-active-"+pid).classList.add("dn")}if(document.getElementById("p-card-buttons-"+pid)){document.getElementById("p-card-buttons-"+pid).style.display="block"}if(document.getElementById("watchlist_container_"+pid)){document.getElementById("watchlist_container_"+pid).style.display="block"}document.getElementById("p-bidmate-toggle-off-"+pid).style.display="none";document.getElementById("p-bidmate-toggle-on-"+pid).style.display="none"}else{handleBidMateButtonsReset();if(document.getElementById("p-bid-bidmate-display-"+pid)&&document.getElementById("p-bid-bidmate-display-"+pid).style.display==="block"){handleBidMateToggleOff(pid)}else{handleBidMateToggleOn(pid)}}}function bidMatesToggleElementFunction(e){e.preventDefault();e.stopPropagation();if(this.dataset&&this.dataset.pid){handleBidMateToggleClick(this.dataset.pid)}}function bidMatesToggleOnFunction(e){e.preventDefault();e.stopPropagation();if(this.dataset&&this.dataset.pid){handleBidMateToggleOff(this.dataset.pid)}}function bidMatesToggleOffFunction(e){e.preventDefault();e.stopPropagation();if(this.dataset&&this.dataset.pid){handleBidMateToggleOn(this.dataset.pid);emitBidMateDeactivationEvent(this.dataset.pid)}}function bidMatesBtnElementFunction(e){e.preventDefault();e.stopPropagation();var pid=this.dataset.pid;this.disabled=true;var count;try{count=document.querySelector("#bidmates-select-"+pid).value?parseInt(document.querySelector("#bidmates-select-"+pid).value,10):0}catch(e){count=0}if(!count||+count>30||+count<1){this.disabled=false;$.notify({title:"<div style='display:flex;'><img class='alert-circle' src='https://cdn.kobobid.com/live/icon/alerts/medium-error.svg' style='height:30px;width:30px;margin-top:7px;'><div style='flex:1; color:#B94A48;'>Enter a value between 1 and 30</div></div>"},{style:"error",autoHide:true,globalPosition:"top right",clickToHide:false});return}if(typeof emitBidMateActivationEvent==="function"){emitBidMateActivationEvent(pid,count)}closeBidMateToggle(pid)}function setUpBidMateHandleClick(){if(document.querySelectorAll("a.p-bid-bidmate")){var bidMatesToggleElement=document.querySelectorAll("a.p-bid-bidmate"),bmToggleIndex;for(bmToggleIndex=0;bmToggleIndex<bidMatesToggleElement.length;bmToggleIndex++){bidMatesToggleElement[bmToggleIndex].removeEventListener("click",bidMatesToggleElementFunction,true);bidMatesToggleElement[bmToggleIndex].addEventListener("click",bidMatesToggleElementFunction,true)}}if(document.querySelectorAll(".p-bidmate-toggle-on-click")){var bidMatesToggleOnClickElement=document.querySelectorAll(".p-bidmate-toggle-on-click"),bmToggleOnClickIndex;for(bmToggleOnClickIndex=0;bmToggleOnClickIndex<bidMatesToggleOnClickElement.length;bmToggleOnClickIndex++){bidMatesToggleOnClickElement[bmToggleOnClickIndex].removeEventListener("click",bidMatesToggleOnFunction,true);bidMatesToggleOnClickElement[bmToggleOnClickIndex].addEventListener("click",bidMatesToggleOnFunction,true)}}if(document.querySelectorAll(".p-bidmate-toggle-off-click")){var bidMatesToggleOffClickElement=document.querySelectorAll(".p-bidmate-toggle-off-click"),bmToggleOffClickIndex;for(bmToggleOffClickIndex=0;bmToggleOffClickIndex<bidMatesToggleOffClickElement.length;bmToggleOffClickIndex++){bidMatesToggleOffClickElement[bmToggleOffClickIndex].removeEventListener("click",bidMatesToggleOffFunction,true);bidMatesToggleOffClickElement[bmToggleOffClickIndex].addEventListener("click",bidMatesToggleOffFunction,true)}}if(document.querySelectorAll(".btn-bidmate-btn")){var bidMatesBtnElement=document.querySelectorAll(".btn-bidmate-btn"),bmBidmatesToggleIndex;for(bmBidmatesToggleIndex=0;bmBidmatesToggleIndex<bidMatesBtnElement.length;bmBidmatesToggleIndex++){var btnBidmatesId=bidMatesBtnElement[bmBidmatesToggleIndex];if(btnBidmatesId.dataset&&btnBidmatesId.dataset.pid){btnBidmatesId.removeEventListener("click",bidMatesBtnElementFunction,true);btnBidmatesId.addEventListener("click",bidMatesBtnElementFunction,true)}}}}setUpBidMateHandleClick();