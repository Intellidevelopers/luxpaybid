$(function(){$("#newsletter-sign-up-form #first_name").on("keyup blur",function(){validateInlineFirstName($(this),$("#newsletter-sign-up-button"));oneSecondDebounce()});$("#newsletter-sign-up-form #last_name").on("keyup blur",function(){validateInlineLastName($(this),$("#newsletter-sign-up-button"));oneSecondDebounce()});$("#newsletter-sign-up-form #email").on("keyup blur",function(){validateInlineEmail($(this),$("#newsletter-sign-up-button"));oneSecondDebounce()});$("#newsletter_email_collecter").off("submit").on("submit",function(e){e.preventDefault();$(".newsletter_form_container").slideDown();$("#newsletter-sign-up-form #email").val($("#newsletter_email").val());$("#newsletter-sign-up-form #first_name").focus();$("#newsletter_info_bar").hide();$("#newsletter_info_bar span").html()});$("#newsletter-cancel-sign-up-button").off("click").on("click",function(e){e.preventDefault();$(".newsletter_form_container").slideUp();$("#newsletter-sign-up-form").trigger("reset");$("#newsletter_email_collecter").trigger("reset");clearInlineErrors()});$("#newsletter-sign-up-form").off("submit").on("submit",function(e){e.preventDefault();var $this=$(this);var oldButtonHtml=disableOldButton($("#newsletter-sign-up-button"),$this);clearInlineErrors();var postData={first_name:$("#newsletter-sign-up-form #first_name").val(),last_name:$("#newsletter-sign-up-form #last_name").val(),email:$("#newsletter-sign-up-form #email").val(),eighteen_or_over:$("#newsletter-sign-up-form #eighteen_or_over").is(":checked")?$("#newsletter-sign-up-form #eighteen_or_over").val():"",newsletter_opt_in:"Yes",is_async:true};$.ajax({type:"POST",url:"/newsletter",dataType:"JSON",data:postData,success:function(){$(".newsletter_form_container").slideUp();$("#newsletter-sign-up-form").trigger("reset");$("#newsletter_email_collecter").trigger("reset");enableOldButton(oldButtonHtml,$("#newsletter-sign-up-button"),$this);clearInlineErrors();$("#newsletter_info_bar span").html("Thanks for signing up!");$("#newsletter_info_bar").show()},error:function(responseError){if(responseError.hasOwnProperty("responseJSON")&&responseError.responseJSON.hasOwnProperty("errors")){formatInlineErrorMessages(responseError.responseJSON.errors)}enableOldButton(oldButtonHtml,$("#newsletter-sign-up-button"),$this)}})})});